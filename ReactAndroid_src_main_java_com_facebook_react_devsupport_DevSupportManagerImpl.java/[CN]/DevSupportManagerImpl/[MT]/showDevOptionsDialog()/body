{
  if (mDevOptionsDialog != null || !mIsDevSupportEnabled) {
    return;
  }
  LinkedHashMap<String,DevOptionHandler> options=new LinkedHashMap<>();
  options.put(mApplicationContext.getString(R.string.catalyst_reloadjs),new DevOptionHandler(){
    @Override public void onOptionSelected(){
      handleReloadJS();
    }
  }
);
  options.put(mIsUsingJSProxy ? mApplicationContext.getString(R.string.catalyst_debugjs_off) : mApplicationContext.getString(R.string.catalyst_debugjs),new DevOptionHandler(){
    @Override public void onOptionSelected(){
      mIsUsingJSProxy=!mIsUsingJSProxy;
      handleReloadJS();
    }
  }
);
  options.put(mDevSettings.isHotModuleReplacementEnabled() ? mApplicationContext.getString(R.string.catalyst_hot_module_replacement_off) : mApplicationContext.getString(R.string.catalyst_hot_module_replacement),new DevOptionHandler(){
    @Override public void onOptionSelected(){
      mDevSettings.setHotModuleReplacementEnabled(!mDevSettings.isHotModuleReplacementEnabled());
      handleReloadJS();
    }
  }
);
  options.put(mDevSettings.isReloadOnJSChangeEnabled() ? mApplicationContext.getString(R.string.catalyst_live_reload_off) : mApplicationContext.getString(R.string.catalyst_live_reload),new DevOptionHandler(){
    @Override public void onOptionSelected(){
      mDevSettings.setReloadOnJSChangeEnabled(!mDevSettings.isReloadOnJSChangeEnabled());
    }
  }
);
  options.put(mApplicationContext.getString(R.string.catalyst_element_inspector),new DevOptionHandler(){
    @Override public void onOptionSelected(){
      mDevSettings.setElementInspectorEnabled(!mDevSettings.isElementInspectorEnabled());
      mReactInstanceCommandsHandler.toggleElementInspector();
    }
  }
);
  options.put(mApplicationContext.getString(R.string.catalyst_heap_capture),new DevOptionHandler(){
    @Override public void onOptionSelected(){
      try {
        String heapDumpPath=mApplicationContext.getCacheDir() + "/heapdump.json";
        JSCHeapCapture.captureHeap(heapDumpPath,60000);
        Toast.makeText(mCurrentContext,"Heap captured to " + heapDumpPath,Toast.LENGTH_LONG).show();
      }
 catch (      JSCHeapCapture.CaptureException e) {
        showNewJavaError(e.getMessage(),e);
      }
    }
  }
);
  options.put(mDevSettings.isFpsDebugEnabled() ? mApplicationContext.getString(R.string.catalyst_perf_monitor_off) : mApplicationContext.getString(R.string.catalyst_perf_monitor),new DevOptionHandler(){
    @Override public void onOptionSelected(){
      mDevSettings.setFpsDebugEnabled(!mDevSettings.isFpsDebugEnabled());
    }
  }
);
  if (mCurrentContext != null && mCurrentContext.getCatalystInstance() != null && !mCurrentContext.getCatalystInstance().isDestroyed() && mCurrentContext.getCatalystInstance().supportsProfiling()) {
    options.put(mApplicationContext.getString(mIsCurrentlyProfiling ? R.string.catalyst_stop_profile : R.string.catalyst_start_profile),new DevOptionHandler(){
      @Override public void onOptionSelected(){
        if (mCurrentContext != null && mCurrentContext.hasActiveCatalystInstance()) {
          String profileName=(Environment.getExternalStorageDirectory().getPath() + "/profile_" + mProfileIndex+ ".json");
          if (mIsCurrentlyProfiling) {
            mIsCurrentlyProfiling=false;
            mProfileIndex++;
            Debug.stopMethodTracing();
            mCurrentContext.getCatalystInstance().stopProfiler("profile",profileName);
            Toast.makeText(mCurrentContext,"Profile output to " + profileName,Toast.LENGTH_LONG).show();
          }
 else {
            mIsCurrentlyProfiling=true;
            mCurrentContext.getCatalystInstance().startProfiler("profile");
            Debug.startMethodTracingSampling(profileName,JAVA_SAMPLING_PROFILE_MEMORY_BYTES,JAVA_SAMPLING_PROFILE_DELTA_US);
          }
        }
      }
    }
);
  }
  options.put(mApplicationContext.getString(R.string.catalyst_settings),new DevOptionHandler(){
    @Override public void onOptionSelected(){
      Intent intent=new Intent(mApplicationContext,DevSettingsActivity.class);
      intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
      mApplicationContext.startActivity(intent);
    }
  }
);
  if (mCustomDevOptions.size() > 0) {
    options.putAll(mCustomDevOptions);
  }
  final DevOptionHandler[] optionHandlers=options.values().toArray(new DevOptionHandler[0]);
  mDevOptionsDialog=new AlertDialog.Builder(mApplicationContext).setItems(options.keySet().toArray(new String[0]),new DialogInterface.OnClickListener(){
    @Override public void onClick(    DialogInterface dialog,    int which){
      optionHandlers[which].onOptionSelected();
      mDevOptionsDialog=null;
    }
  }
).setOnCancelListener(new DialogInterface.OnCancelListener(){
    @Override public void onCancel(    DialogInterface dialog){
      mDevOptionsDialog=null;
    }
  }
).create();
  mDevOptionsDialog.getWindow().setType(WindowManager.LayoutParams.TYPE_SYSTEM_ALERT);
  mDevOptionsDialog.show();
}
