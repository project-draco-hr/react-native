{
  if (needsRelayout(node,parentMaxWidth)) {
    node.lastLayout.requestedWidth=node.layout.dimensions[DIMENSION_WIDTH];
    node.lastLayout.requestedHeight=node.layout.dimensions[DIMENSION_HEIGHT];
    node.lastLayout.parentMaxWidth=parentMaxWidth;
    layoutNodeImpl(layoutContext,node,parentMaxWidth,parentDirection);
    node.lastLayout.copy(node.layout);
  }
 else {
    node.layout.copy(node.lastLayout);
  }
  node.markHasNewLayout();
}
