{
  if (needsRelayout(node,parentMaxWidth,parentMaxHeight)) {
    node.lastLayout.requestedWidth=node.layout.dimensions[DIMENSION_WIDTH];
    node.lastLayout.requestedHeight=node.layout.dimensions[DIMENSION_HEIGHT];
    node.lastLayout.parentMaxWidth=parentMaxWidth;
    node.lastLayout.parentMaxHeight=parentMaxHeight;
    for (int i=0, childCount=node.getChildCount(); i < childCount; i++) {
      node.getChildAt(i).layout.resetResult();
    }
    layoutNodeImpl(layoutContext,node,parentMaxWidth,parentMaxHeight,parentDirection);
    node.lastLayout.copy(node.layout);
  }
 else {
    node.layout.copy(node.lastLayout);
  }
  node.markHasNewLayout();
}
