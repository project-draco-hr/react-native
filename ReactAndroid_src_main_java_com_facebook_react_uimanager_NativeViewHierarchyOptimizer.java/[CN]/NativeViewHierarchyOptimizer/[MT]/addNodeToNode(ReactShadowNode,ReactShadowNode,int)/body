{
  int indexInNativeChildren=parent.getNativeOffsetForChild(parent.getChildAt(index));
  boolean parentIsLayoutOnly=parent.isLayoutOnly();
  boolean childIsLayoutOnly=child.isLayoutOnly();
  if (!parentIsLayoutOnly && !childIsLayoutOnly) {
    addNonLayoutNodeToNonLayoutNode(parent,child,indexInNativeChildren);
  }
 else   if (!childIsLayoutOnly) {
    addNonLayoutOnlyNodeToLayoutOnlyNode(parent,child,indexInNativeChildren);
  }
 else   if (!parentIsLayoutOnly) {
    addLayoutOnlyNodeToNonLayoutOnlyNode(parent,child,indexInNativeChildren);
  }
 else {
    addLayoutOnlyNodeToLayoutOnlyNode(parent,child,indexInNativeChildren);
  }
}
