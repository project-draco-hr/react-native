{
  List<ModuleDefinition> moduleTable=new ArrayList<>();
  Map<Class<? extends NativeModule>,NativeModule> moduleInstances=new HashMap<>();
  int idx=0;
  for (  NativeModule module : mModules.values()) {
    ModuleDefinition moduleDef=new ModuleDefinition(idx++,module.getName(),module);
    moduleTable.add(moduleDef);
    moduleInstances.put(module.getClass(),module);
  }
  return new NativeModuleRegistry(moduleTable,moduleInstances);
}
