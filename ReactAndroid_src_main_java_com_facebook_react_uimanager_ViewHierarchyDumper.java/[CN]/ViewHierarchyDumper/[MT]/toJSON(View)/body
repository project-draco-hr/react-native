{
  UiThreadUtil.assertOnUiThread();
  if (view == null) {
    return null;
  }
  JSONObject result=new JSONObject();
  try {
    result.put("class",view.getClass().getSimpleName());
    Object tag=view.getTag();
    if (tag != null && tag instanceof String) {
      result.put("id",tag);
    }
    if (view instanceof ViewGroup) {
      ViewGroup viewGroup=(ViewGroup)view;
      if (viewGroup.getChildCount() > 0) {
        JSONArray children=new JSONArray();
        for (int i=0; i < viewGroup.getChildCount(); i++) {
          children.put(i,toJSON(viewGroup.getChildAt(i)));
        }
        result.put("children",children);
      }
    }
  }
 catch (  JSONException ex) {
    return null;
  }
  return result;
}
