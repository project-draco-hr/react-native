{
  FLog.i(ReactConstants.TAG,"Creating react context.");
  ReactMarker.logMarker("CREATE_REACT_CONTEXT_START");
  mSourceUrl=jsBundleLoader.getSourceUrl();
  NativeModuleRegistry.Builder nativeRegistryBuilder=new NativeModuleRegistry.Builder();
  JavaScriptModulesConfig.Builder jsModulesBuilder=new JavaScriptModulesConfig.Builder();
  ReactApplicationContext reactContext=new ReactApplicationContext(mApplicationContext);
  if (mUseDeveloperSupport) {
    reactContext.setNativeModuleCallExceptionHandler(mDevSupportManager);
  }
  Systrace.beginSection(Systrace.TRACE_TAG_REACT_JAVA_BRIDGE,"createAndProcessCoreModulesPackage");
  try {
    CoreModulesPackage coreModulesPackage=new CoreModulesPackage(this,mBackBtnHandler,mUIImplementationProvider);
    processPackage(coreModulesPackage,reactContext,nativeRegistryBuilder,jsModulesBuilder);
  }
  finally {
    Systrace.endSection(Systrace.TRACE_TAG_REACT_JAVA_BRIDGE);
  }
  for (  ReactPackage reactPackage : mPackages) {
    Systrace.beginSection(Systrace.TRACE_TAG_REACT_JAVA_BRIDGE,"createAndProcessCustomReactPackage");
    try {
      processPackage(reactPackage,reactContext,nativeRegistryBuilder,jsModulesBuilder);
    }
  finally {
      Systrace.endSection(Systrace.TRACE_TAG_REACT_JAVA_BRIDGE);
    }
  }
  Systrace.beginSection(Systrace.TRACE_TAG_REACT_JAVA_BRIDGE,"buildNativeModuleRegistry");
  NativeModuleRegistry nativeModuleRegistry;
  try {
    nativeModuleRegistry=nativeRegistryBuilder.build();
  }
  finally {
    Systrace.endSection(Systrace.TRACE_TAG_REACT_JAVA_BRIDGE);
  }
  Systrace.beginSection(Systrace.TRACE_TAG_REACT_JAVA_BRIDGE,"buildJSModuleConfig");
  JavaScriptModulesConfig javaScriptModulesConfig;
  try {
    javaScriptModulesConfig=jsModulesBuilder.build();
  }
  finally {
    Systrace.endSection(Systrace.TRACE_TAG_REACT_JAVA_BRIDGE);
  }
  NativeModuleCallExceptionHandler exceptionHandler=mNativeModuleCallExceptionHandler != null ? mNativeModuleCallExceptionHandler : mDevSupportManager;
  CatalystInstanceImpl.Builder catalystInstanceBuilder=new CatalystInstanceImpl.Builder().setCatalystQueueConfigurationSpec(CatalystQueueConfigurationSpec.createDefault()).setJSExecutor(jsExecutor).setRegistry(nativeModuleRegistry).setJSModulesConfig(javaScriptModulesConfig).setJSBundleLoader(jsBundleLoader).setNativeModuleCallExceptionHandler(exceptionHandler);
  Systrace.beginSection(Systrace.TRACE_TAG_REACT_JAVA_BRIDGE,"createCatalystInstance");
  CatalystInstance catalystInstance;
  try {
    catalystInstance=catalystInstanceBuilder.build();
  }
  finally {
    Systrace.endSection(Systrace.TRACE_TAG_REACT_JAVA_BRIDGE);
  }
  if (mBridgeIdleDebugListener != null) {
    catalystInstance.addBridgeIdleDebugListener(mBridgeIdleDebugListener);
  }
  reactContext.initializeWithInstance(catalystInstance);
  Systrace.beginSection(Systrace.TRACE_TAG_REACT_JAVA_BRIDGE,"runJSBundle");
  try {
    catalystInstance.runJSBundle();
  }
  finally {
    Systrace.endSection(Systrace.TRACE_TAG_REACT_JAVA_BRIDGE);
  }
  ReactMarker.logMarker("CREATE_REACT_CONTEXT_END");
  return reactContext;
}
