{
  HashSet<RequestListener> requestListeners=new HashSet<>();
  requestListeners.add(new SystraceRequestListener());
  if (listener != null) {
    requestListeners.add(listener);
  }
  OkHttpClient okHttpClient=OkHttpClientProvider.getOkHttpClient();
  ImagePipelineConfig.Builder builder=OkHttpImagePipelineConfigFactory.newBuilder(context.getApplicationContext(),okHttpClient);
  builder.setDownsampleEnabled(false).setRequestListeners(requestListeners);
  if (diskCacheConfig != null) {
    builder.setMainDiskCacheConfig(diskCacheConfig);
  }
  return builder.build();
}
