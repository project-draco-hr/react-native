{
  File exoDir=new File("/data/local/tmp/exopackage/" + context.getPackageName() + "/native-libs/");
  HashMap<String,File> providedLibraries=new HashMap<>();
  for (  String abi : SysUtil.getSupportedAbis()) {
    File abiDir=new File(exoDir,abi);
    if (!abiDir.isDirectory()) {
      continue;
    }
    File metadata=new File(abiDir,"metadata.txt");
    if (!metadata.isFile()) {
      continue;
    }
    try (FileReader fr=new FileReader(metadata);BufferedReader br=new BufferedReader(fr)){
      String line;
      while ((line=br.readLine()) != null) {
        if (line.length() == 0) {
          continue;
        }
        int sep=line.indexOf(' ');
        if (sep == -1) {
          throw new RuntimeException("illegal line in exopackage metadata: [" + line + "]");
        }
        String soName=line.substring(0,sep) + ".so";
        String backingFile=line.substring(sep + 1);
        if (!providedLibraries.containsKey(soName)) {
          providedLibraries.put(soName,new File(abiDir,backingFile));
        }
      }
    }
   }
  return providedLibraries;
}
